<script>
/* ------------------------------------------------------------------
   Nav href を SCRIPT_URL で補完（index / Detail 共通）
------------------------------------------------------------------ */
(function () {
  /* SCRIPT_URL は index.html で window 直書き、Detail はここで初期化 */
  window.SCRIPT_URL = window.SCRIPT_URL || '<?= scriptUrl ?>';

  function wireNav() {
    if (!window.SCRIPT_URL) return;              // まだ空なら後で再試行
    document.querySelectorAll('#gNav a[data-page], #pNav a[data-page]')
      .forEach(a => a.href = `${window.SCRIPT_URL}?page=${a.dataset.page}`);
  }

  /* 1) DOM 完成時 */
  document.addEventListener('DOMContentLoaded', wireNav);
  /* 2) BarGnavi / BarPnavi を include 後に監視しても安全 */
  new MutationObserver(wireNav)
    .observe(document.body, { childList:true, subtree:true });
 })();
 </script>
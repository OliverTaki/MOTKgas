<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <?!= include('Styles'); ?>
</head>
<body>
  <header class="banner">
    <h1 id="title">Shot <?= id ?></h1>
  </header>

  <main id="content">
    <section id="overview"></section>
    <section id="files" class="hidden"></section>
  </main>

  <nav class="tabs">
    <button data-tab="overview" class="active">Overview</button>
    <button data-tab="files">Files</button>
  </nav>

  <?!= include('Scripts'); ?>
  <script>
    const ENTITY = 'shot';
    const ID     = '<?= id ?>';

    /* --- fetch & render -------------------------------------------------- */
    google.script.run.withSuccessHandler(renderOverview).getEntity(ENTITY, ID);

    function renderOverview(obj) {
      if (!obj) { document.getElementById('overview').textContent = 'Not found'; return;}
      const wrap = document.getElementById('overview');
      wrap.innerHTML = '';
      Object.entries(obj).forEach(([k,v])=>{
        const row = document.createElement('div');
        row.className = 'row';
        row.innerHTML = `<label>${k}</label><span>${v}</span>`;
        wrap.appendChild(row);
      });
    }

    /* --- tab switch ------------------------------------------------------ */
    document.querySelectorAll('.tabs button').forEach(btn=>{
      btn.onclick = ()=>{
        document.querySelector('.tabs .active').classList.remove('active');
        btn.classList.add('active');
        const target = btn.dataset.tab;
        document.querySelectorAll('main section').forEach(sec=>{
          sec.classList.toggle('hidden', sec.id !== target);
        });
      };
    });
  </script>
</body>
</html>

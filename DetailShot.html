<!doctype html>
<html>
<head>
  <base target="_top">
  <?!= include('CoreStyles'); ?>
  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/gridstack.js/5.1.1/gridstack.min.css">
</head>

<body class="h-screen">
  <!-- gNav / pNav : 上部 2 本 -->
  <?!= include('BarGnavi'); ?>
  <?!= include('BarPnavi'); ?>

  <!-- Detail ツールバー（CoreStyles で高さ 32px に統一） -->
  <header id="detailBar"
          class="fixed left-0 right-0 z-350 flex items-center justify-between px-3
                 bg-gray-800 text-white"
          style="top:var(--total-header-height)">
    <!-- 左 -->
    <div class="flex items-center gap-3">
      <span id="fi_0002" class="font-semibold"></span>
      <button id="pathBtn" class="bg-gray-700 rounded flex items-center gap-1">
        <span id="pathLabel">-</span> ▾
      </button>
      <button id="prevBtn" class="bg-gray-700 rounded">&laquo;</button>
      <button id="nextBtn" class="bg-gray-700 rounded">&raquo;</button>
    </div>
    <!-- 右 -->
    <div class="flex items-center gap-3">
      <button id="modeToggle"
              class="bg-gray-700 rounded border border-white/30 px-3">編集</button>
      <select id="layoutSel" class="text-black rounded">
        <option value="_default">_default</option>
      </select>
    </div>

    <!-- 階層メニュー -->
    <div id="hierMenu"
         class="absolute z-400 mt-1 min-w-[240px] bg-white shadow-lg rounded hidden"></div>
  </header>

  <!-- GridStack / fallback list 領域 -->
  <main id="gridArea"
        class="overflow-x-auto overflow-y-auto bg-gray-100 p-4"
        style="position:fixed;left:0;right:0;bottom:0;top:calc(var(--total-header-height) + 32px)">
    <div id="grid" class="grid-stack"></div>
    <div id="fallbackList" class="hidden"></div>
  </main>

  <?!= include('CoreStyles'); ?>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gridstack.js/5.1.1/gridstack-h5.min.js"></script>
  <?!= include('Scripts'); ?>
</body>
</html>

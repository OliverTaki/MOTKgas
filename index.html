<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta charset="utf-8">
    <title>MOTKsheets G-Viewer</title>
    <?!= include('CoreStyles'); ?>
  </head>

  <body>
    <!-- ===== Navigation ===== -->
    <nav id="gNav">
      <span class="logo">MOTK</span>
      <a href="<?= scriptUrl ?>?page=Dashboard">Dashboard</a>
    </nav>
    <nav id="pNav">
      <a href="<?= scriptUrl ?>?page=Shots">SHOTS</a>
      <a href="<?= scriptUrl ?>?page=Assets">ASSETS</a>
      <a href="<?= scriptUrl ?>?page=Tasks">TASKS</a>
      <a href="<?= scriptUrl ?>?page=ProjectMembers">PM</a>
      <a href="<?= scriptUrl ?>?page=Users">USERS</a>
    </nav>

    <!-- ===== Main ===== -->
    <main id="main-content">
      <div class="loader">Loading...</div>
    </main>

    <!-- ===== Embedded Params & Data  (viewer.js より前に置く) ===== -->
    <script>
      const PAGE       = '<?= page ?>';
      const SCRIPT_URL = '<?= scriptUrl ?>';

      const raw        = JSON.parse('<?= dataJson ?>');

      /* ▼▼ 変更ここから ▼▼ */
      const ids        = raw[0];          // fi_0001, fi_0002, …
      const header     = raw[1];          // Shot ID, Shot Name, …
      const dataRows   = raw.slice(2);    // 実データ
      /* ▲▲ 変更ここまで ▲▲ */

      const ALL_DATA = {
        pageType : 'table',
        sheetName: PAGE,
        ids      : ids,
        header   : header,
        total    : dataRows.length,
        rows     : dataRows,
        fieldMeta: [],
        idMaps   : {},
      };
    </script>


    <!-- ===== Core Bundle (列幅リサイズ等) ===== -->
    <script src="<?= scriptUrl ?>?action=app-bundle"></script>

    <!-- ===== viewer.js (initializeTableState / boot) ===== -->
    <?!= include('viewer'); ?>
  </body>
</html>
